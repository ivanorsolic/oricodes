<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.62.1" />
    <meta name="description" content="Ori&#39;s self-driving RC car">
<meta name="author" content="ori">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Connecting the RC to the Nano :: Ori Engineering</title>

    
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/auto-complete.css" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    
      <link href="/css/theme-mine.css" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/hardware/connecting-the-car-to-the-nano/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://ori.codes/">
  <img src="/images/logo.png">
</a>

	  1821 words.<br>
	  Reading time: 9 minutes.
	  
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/ori.codes\/";
    
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/rc-car/" title="RC Cars: a primer" class="dd-item 
        
        
        
        ">
      <a href="/rc-car/">
          <b>1. </b>RC Cars: a primer
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/rc-car/parts_list/" title="Parts: an overview" class="dd-item ">
        <a href="/rc-car/parts_list/">
        Parts: an overview
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/scale/" title="Scale" class="dd-item ">
        <a href="/rc-car/scale/">
        Scale
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/body_type/" title="RC Car body types" class="dd-item ">
        <a href="/rc-car/body_type/">
        Body type
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/electric_motors/" title="Electric motors" class="dd-item ">
        <a href="/rc-car/electric_motors/">
        Electric motors
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/servo/" title="Steering servo" class="dd-item ">
        <a href="/rc-car/servo/">
        Servo
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/electronic_speed_controller/" title="Electronic Speed Controller" class="dd-item ">
        <a href="/rc-car/electronic_speed_controller/">
        ESC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/receiver/" title="Receiver" class="dd-item ">
        <a href="/rc-car/receiver/">
        Receiver
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/rc-car/batteries/" title="Batteries" class="dd-item ">
        <a href="/rc-car/batteries/">
        Batteries
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/hardware/" title="Hardware" class="dd-item 
        parent
        
        
        ">
      <a href="/hardware/">
          <b>2. </b>Hardware
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/hardware/inventory/" title="Hardware inventory" class="dd-item ">
        <a href="/hardware/inventory/">
        Inventory: stuff you&#39;ll need
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hardware/building-the-car/" title="Assembling the RC Car" class="dd-item ">
        <a href="/hardware/building-the-car/">
        Assembling the RC Car
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hardware/mounting-plates/" title="Building the mounting plates for the hardware" class="dd-item ">
        <a href="/hardware/mounting-plates/">
        Mounting plates
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hardware/jetson-nano-installation/" title="Preparing the Jetson Nano" class="dd-item ">
        <a href="/hardware/jetson-nano-installation/">
        Preparing the Jetson Nano
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hardware/assembling-the-nano/" title="Assembling the Jetson Nano" class="dd-item ">
        <a href="/hardware/assembling-the-nano/">
        Assembling the Jetson Nano
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/hardware/connecting-the-car-to-the-nano/" title="Connecting the RC to the Nano" class="dd-item active">
        <a href="/hardware/connecting-the-car-to-the-nano/">
        Connecting the RC to the Nano
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/software/" title="Software" class="dd-item 
        
        
        
        ">
      <a href="/software/">
          <b>3. </b>Software
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/software/kernel-hacking/" title="Running the OS from an external SSD using a custom kernel" class="dd-item ">
        <a href="/software/kernel-hacking/">
        OPTIONAL: Kernel Hacking
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/donkeycar/" title="DonkeyCar" class="dd-item ">
        <a href="/software/donkeycar/">
        DonkeyCar: Explained
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/donkeycar-host/" title="DonkeyCar installation: Host PC" class="dd-item ">
        <a href="/software/donkeycar-host/">
        DonkeyCar: Host PC
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/donkeycar-simulator/" title="DonkeyCar Installation: The Simulator" class="dd-item ">
        <a href="/software/donkeycar-simulator/">
        DonkeyCar: Simulator
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/donkeycar-rc/" title="DonkeyCar installation: RC car" class="dd-item ">
        <a href="/software/donkeycar-rc/">
        DonkeyCar: RC car
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/setting-up-donkeycar-on-the-rc/" title="DonkeyCar configuration: RC car" class="dd-item ">
        <a href="/software/setting-up-donkeycar-on-the-rc/">
        DonkeyCar configuration: RC car
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/calibrating-steering-and-throttle/" title="Calibrating steering and throttle" class="dd-item ">
        <a href="/software/calibrating-steering-and-throttle/">
        Calibrating steering and throttle
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/connecting-a-bluetooth-gamepad/" title="Using a gamepad" class="dd-item ">
        <a href="/software/connecting-a-bluetooth-gamepad/">
        Using a gamepad
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/test-driving-the-rc/" title="Test drive" class="dd-item ">
        <a href="/software/test-driving-the-rc/">
        Test drive
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/software/sanity-check-first-autopilot/" title="First Autopilot: sanity check" class="dd-item ">
        <a href="/software/sanity-check-first-autopilot/">
        First Autopilot: sanity check
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/artificial-intelligence/" title="Artificial Intelligence" class="dd-item 
        
        
        
        ">
      <a href="/artificial-intelligence/">
          <b>4. </b>Artificial Intelligence
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    


    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://ori.codes/hardware/connecting-the-car-to-the-nano/" selected>English</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
	  
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
	  
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/ivanorsolic"><i class='fab fa-github'></i> Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://twitter.com/ivanorsolic"><i class='fab fa-twitter'></i> Twitter</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://ivanorsolic.github.io"><i class='fas fa-tasks'></i> Other stuff</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://drive.google.com/file/d/1c4F5kfnWZnwQciP8gKyKunzDOqBJ5gDM/view?usp=sharing"><i class='fas fa-file'></i> My CV</a>
              </li>
          
        </ul>
      </section>
    
      </ul>
    </section>
    
	
    <section id="footer">
      <p align="center">Built by <a href="https://twitter.com/ivanorsolic">Ori</a> with <a href="https://github.com/matcornic/hugo-theme-learn">Learn</i></a>, <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo.</a><br>
Hosted for free at <a href="https://app.netlify.com">Netlify <i class="fas fa-heart"></i></a>
</p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Connecting the RC to the Nano 
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#finding-your-escservo">Finding your ESC/Servo</a></li>
    <li><a href="#enter-the-pca9685">Enter: the PCA9685</a></li>
  </ul>

  <ul>
    <li><a href="#i2c">I2C</a>
      <ul>
        <li><a href="#why-i2c-alternatives">Why I2C? Alternatives?</a></li>
        <li><a href="#serial-uart">Serial UART:</a></li>
        <li><a href="#spi">SPI:</a></li>
        <li><a href="#i2c-1">I2C</a></li>
      </ul>
    </li>
    <li><a href="#i2c-signal-basics">I2C Signal basics</a></li>
    <li><a href="#pwm-basics">PWM basics</a>
      <ul>
        <li><a href="#example-led-brightness">Example: LED Brightness</a></li>
      </ul>
    </li>
    <li><a href="#pca9865-overview">PCA9865 overview</a></li>
    <li><a href="#pwm-controlled-servo-basics">PWM Controlled Servo basics</a></li>
    <li><a href="#rc-servo-basics">RC Servo basics</a></li>
    <li><a href="#rc-esc-basics">RC ESC basics</a>
      <ul>
        <li><a href="#my-schematic">My schematic:</a></li>
      </ul>
    </li>
    <li><a href="#connecting-the-pca9865-to-the-nano">Connecting the PCA9865 to the Nano</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Connecting the RC to the Nano
            </h1>
          

        



<p>Now comes the part that should differ the most, based on the RC you got. But don't worry, it's very much doable no matter the RC you got!</p>
<h2 id="finding-your-escservo">Finding your ESC/Servo</h2>
<p>The first thing you should do is find your ESC and your Servo connectors, which should be a three wire connector coming from your RC car.</p>
<p>If you've bought a car that came with a wireless receiver, both the connectors should be connected to it. Here's what it looked like on my RC:</p>
<p><img src="/images/hardware/esc.png" alt="Photo of my ESC and wireless receiver" style="zoom:50%;" /></p>
<p>If you didn't have a wireless receiver, you should be able to see a connector coming out of your ESC, which is hooked to the RC motor, and a connector coming out of your steering servo, found at the front of your RC.</p>
<p>Here's a closeup of the two connectors connected to the receiver, with the first channel being the steering servo and the second one being the ESC, in my case:</p>
<p><img src="/images/hardware/receiver.png" alt="Closeup of my receiver" style="zoom:50%;" /></p>
<p>Okay, we found the connectors, how do we hook them up to our car?</p>
<h2 id="enter-the-pca9685">Enter: the PCA9685</h2>
<p>We connect them to the first two channels (0 and 1) of our PCA9685, highlighted in green and blue:</p>
<p><img src="/images/hardware/pca2.png" alt="Photo of my ESC and wireless receiver" style="zoom:50%;" /></p>
<p>It doesn't matter which channel you connect the servo to, and which one the ESC to, just take note which one went where, you'll need it later on. You can see the numbers denoting the channels above the three pins. I've connected mine to the zeroth and first channel:</p>
<p><img src="/images/hardware/pca3.png" alt="Photo of my ESC and wireless receiver" style="zoom:50%;" /></p>
<p>Okay, so we hooked up our car to the PCA9685. Now we need to hook it up to our Nano to be able to control the car through it.</p>
<p>But first, let's talk a bit about the way the Nano communicates with the RC through the PCA9685, using a protocol called I²C (<strong>Inter-Integrated Circuit</strong>) (pronounced: I-squared-C).</p>

<div class="notices tip" ><p>Feel free to skip this part if you aren't interested in the alternatives to I²C and why we're using it. You don't need to understand this stuff in order to continue with the tutorial. That being said, it wouldn't hurt to get to know a few other protocols, just to know what's out there and how they differ.</p>
</div>

<h1 id="click-here-to-skipconnecting-the-pca9865-to-the-nano"><a href="#connecting-the-pca9865-to-the-nano"><strong>CLICK HERE TO SKIP</strong></a></h1>
<h2 id="i2c">I2C</h2>
<p>What the heck is I²C?</p>
<p>It was designed back in the &lsquo;80s by Philips, to enable components on a circuit board easily communicate with each other. So it's a protocol components use to talk to each other.</p>
<p>If you want to read a bit more, here's <a href="https://www.nxp.com/docs/en/user-guide/UM10204.pdf">the specification</a> by NXP, since Phillips semiconductors <a href="https://www.photonics.com/Articles/Philips_Semiconductors_Becomes_NXP/a26741">migrated to NXP</a> back in 2006.</p>
<p>There's also a pretty neat primer you can <a href="https://www.i2c-bus.org/i2c-primer/">read on the i2c-bus.org site</a>.</p>
<h3 id="why-i2c-alternatives">Why I2C? Alternatives?</h3>
<p>This is basically a TL;DR of <a href="https://learn.sparkfun.com/tutorials/i2c/all">the awesome SparkFun I²C tutorial</a>, be sure to check it out if you wanna go into more depth. I'll assume you have some basics of UART and SPI while going through them.</p>

<div class="notices tip" ><p>If you are interested in this kinda stuff, but haven't really done any embedded/electronics work before, please do check out <a href="https://www.sparkfun.com/engineering_essentials"><strong>the Engineering Essentials tutorials on SparkFun</strong></a>, they're great.</p>
</div>

<h3 id="serial-uart">Serial UART:</h3>
<ul>
<li>Serial ports are asynchronous (no CLK), so both devices have to agree on a data rate ahead of time: any excessive clock difference will result in garbled data.</li>
<li>Requires hardware overhead: the UART at either end is relatively complex and difficult to accurately implement in software if necessary. At least one start and stop bit is a part of each frame of data, meaning that 10 bits of transmission time are required for each 8 bits of data sent, which eats into the data rate.</li>
<li>Two, and only two devices: <strong>bus contention</strong> (where two devices attempt to drive the same line at the same time) is always an issue and must be dealt with carefully to prevent damage to the devices in question, usually through external hardware.</li>
<li>Data rate - only a fixed number of baud rates available, highest of which is usually 230400 bits per second.</li>
</ul>
<p><img src="https://cdn.sparkfun.com/r/600-600/assets/5/c/a/3/0/51adfda8ce395f935d000000.png" alt="Block diagram of an asynchronous serial system."></p>
<h3 id="spi">SPI:</h3>
<ul>
<li>Number of pins needed: four lines for a single master -&gt; slave connection and each additional slave needs another chip select I/O pin on the master.</li>
<li>A larger number of devices rapidly proliferates the connections - routing signals sucks, sometimes impossible in tight PCB situations.</li>
<li>It's pretty good for high data rate full-duplex connections (10MHz - bits), scales nicely.</li>
<li>The hardware is pretty simple - a shift register, easy software implementation.</li>
</ul>
<p><img src="https://cdn.sparkfun.com/r/600-600/assets/e/b/d/5/8/51adfda8ce395f9d5d000000.png" alt="Block diagram of an SPI system."></p>
<h3 id="i2c-1">I2C</h3>
<ul>
<li>I2C requires a mere two wires, like asynchronous serial, but those two wires can support up to 1008 slave devices.</li>
<li>Unlike SPI, I2C can support a multi-master system, allowing more than one master to communicate with all devices on the bus (although the master devices can't talk to each other over the bus and must take turns using the bus lines).</li>
<li>Data rates fall between asynchronous serial and SPI; most I2C devices can communicate at 100kHz or 400kHz. There is some overhead with I2C; for every 8 bits of data to be sent, one extra bit of meta data (the &ldquo;ACK/NACK&rdquo; bit) must be transmitted.</li>
<li>The hardware required to implement I2C is more complex than SPI, but less than asynchronous serial. It can be fairly trivially implemented in software.</li>
</ul>
<p><img src="https://cdn.sparkfun.com/r/600-600/assets/3/d/1/b/6/51adfda8ce395f151b000000.png" alt="Block diagram of an I2C system"></p>
<h2 id="i2c-signal-basics">I2C Signal basics</h2>
<p>Each I2C bus consists of two signals: SCL and SDA.</p>
<ul>
<li>SCL is the clock signal, and SDA is the data signal.</li>
<li>The clock signal is always generated by the current bus master; some slave devices may force the clock low at times to delay the master sending more data (or to require more time to prepare data before the master attempts to clock it out). This is called &ldquo;clock stretching&rdquo;.</li>
</ul>
<h2 id="pwm-basics">PWM basics</h2>
<p>PWM is a digital (i.e. square wave) signal that oscillates according to a given <strong>frequency</strong> and <strong>duty cycle</strong>.</p>
<ul>
<li>The frequency (expressed in Hz) describes how often the output pulse repeats.</li>
<li>The period is the time each cycle takes and is the inverse of frequency.</li>
<li>The duty cycle (expressed as a percentage) describes the width of the pulse within that frequency window.</li>
</ul>
<p><img src="https://developer.android.com/things/images/pwm-signal.png" alt="img"></p>
<p>You can adjust the duty cycle to increase or decrease the average &ldquo;on&rdquo; time of the signal. The following diagram shows pulse trains at 0%, 25%, and 100% duty:</p>
<p><img src="https://developer.android.com/things/images/pwm-duty.png" alt="img"></p>
<blockquote>
<p><strong>Note:</strong> Most PWM hardware has to toggle at least once per cycle, so even duty values of 0% and 100% will have a small transition at the beginning of each cycle.</p>
</blockquote>
<h3 id="example-led-brightness">Example: LED Brightness</h3>
<ul>
<li>20% duty cycle at 100 Hz or above will just look dimmer than fully on.</li>
</ul>
<p><img src="https://cdn.sparkfun.com/assets/4/a/f/c/e/512e8754ce395fac64000000.jpg" alt="Three dim LEDs"></p>
<h2 id="pca9865-overview">PCA9865 overview</h2>
<p><img src="/images/hardware/pca4.png" alt="1570137158265"></p>
<ul>
<li>
<p>Adjustable frequency PWM up to about 1.6 KHz.</p>
</li>
<li>
<p>12-bit resolution for each output: for servos, that means about 4us resolution at 60Hz update rate, 4096 levels.</p>
</li>
<li>
<p>Multiple Drivers (up to 62) can be chained to control still more servos. With headers at both ends of the board, the wiring is as simple as connecting a <a href="https://www.adafruit.com/products/206">6-pin parallel cable</a> from one board to the next.</p>
<p><img src="https://cdn-learn.adafruit.com/assets/assets/000/002/223/medium800/adafruit_products_MultiBoard_bb-1024.jpg?1396780621" alt="adafruit_products_MultiBoard_bb-1024.jpg"  /></p>
</li>
<li>
<p>Board 0:  Address = 0x40  Offset = binary 00000 (no jumpers required)</p>
</li>
<li>
<p>Board 1:  Address = 0x41  Offset = binary 00001 (bridge A0)</p>
</li>
<li>
<p>Board 2:  Address = 0x42  Offset = binary 00010 (bridge A1)</p>
</li>
<li>
<p>Board 3:  Address = 0x43  Offset = binary 00011 (bridge A0 &amp; A1)</p>
</li>
<li>
<p>Board 4:  Address = 0x44  Offset = binary 00100 (bridge A2)</p>
</li>
<li>
<p>Board 5: &hellip;</p>
<p><img src="https://cdn-learn.adafruit.com/assets/assets/000/002/263/medium800/adafruit_products_2012_10_13_IMG_0692-1024.jpg?1396781108" alt="adafruit_products_2012_10_13_IMG_0692-1024.jpg"></p>
</li>
</ul>
<h2 id="pwm-controlled-servo-basics">PWM Controlled Servo basics</h2>
<ol>
<li>PWM signals go into the signal demodulation circuit through the receiving channel, so to generate a DC bias voltage.</li>
<li>It will then be compared with the voltage of the potentiometer, and thus a voltage gap is obtained and input into the motor driver IC to drive the motors to rotate clockwise or anticlockwise.</li>
<li>When the speed reaches to a certain number, it will drive the potentiometer R to rotate by the cascaded reduction gear, until the gap is reduced to 0 and the servo stops spinning.</li>
<li>A servo is controlled by PWM signals, and the change of duty cycle control that of the position the servo rotates to.</li>
</ol>
<p>A typical servo motor expects to be updated every 20 ms with a pulse between 1 ms and 2 ms, or in other words, between a 5 and 10% duty cycle on a 50 Hz waveform.</p>
<p>The period of 20 ms (50 Hz) comes from the days where the signal was encoded in PPM format to be sent over the air.</p>
<p>The PPM period was around 22.5 ms, and the conversion to PWM was trivial: the time of the PWM high state was the time position of the PPM pulse for that servo.</p>
<h2 id="rc-servo-basics">RC Servo basics</h2>
<ul>
<li>
<p>Modern RC servo position is not defined by the PWM duty cycle (ON/OFF time) but only by the width of the pulse.</p>
</li>
<li>
<p>The frequency doesn't matter as long as it is between 40 Hz and 200 Hz.</p>
</li>
<li>
<p>Typically expects around 4.8V to 6V input on the power wire (varies by car) and a PWM control signal on the signal wire.</p>
</li>
<li>
<p>Three wires are colored black-red-white, or brown-red-yellow, where the dark wire (black/brown) is ground, and the center wire (red) is power, and the light wire (white/yellow) is control.</p>
</li>
<li>
<p><strong>RC-style PWM:</strong></p>
<ul>
<li>One pulse is sent 60 times a second, and the width of this pulse controls how left/right the servo turns.</li>
<li>1500 microseconds - the servo is centered;</li>
<li>1000 microseconds - the servo is turned all the way left (or right);</li>
<li>2000 microseconds - the servo is turned all the way in the other direction</li>
</ul>
<p><img src="https://www.digikey.in/-/media/Images/Article%20Library/TechZone%20Articles/2017/March/Servo%20Motors%20and%20Control%20with%20Arduino%20Platforms/article-2017march-servo-motors-and-control-fig2.jpg?ts=7e4dd0f5-a73a-4dac-bf4a-46d354a1e3b6&amp;la=en-IN" alt="Image result for servo pwm"></p>
</li>
</ul>
<h2 id="rc-esc-basics">RC ESC basics</h2>
<ul>
<li>Pulse between 1000 and 2000 microseconds</li>
<li>Controls the power to the motor so the motor spins with different amounts of power in forward or reverse.</li>
<li>Again, 1500 microseconds typically means &ldquo;center&rdquo; which for the motor means &ldquo;dead stop.&rdquo;</li>
</ul>
<h3 id="my-schematic">My schematic:</h3>
<p><img src="/images/hardware/pcaassembly.png" alt="PCA9865 assembly_bb"></p>

<div class="notices warning" ><p>Note to self: It is <strong>not a good idea</strong> to use the Jetson 5V pin to power your PCA9865. Electrical noise and &lsquo;brownouts&rsquo; from excess current draw can cause the Nano to act erratically, reset and/or overheat. The PCA9685 should get its own, separate power supply.</p>
</div>

<h2 id="connecting-the-pca9865-to-the-nano">Connecting the PCA9865 to the Nano</h2>
<p>We'll be using the SCL, SDA I2C pins from the PCA9865, along with the GND and VCC pins for power:</p>
<p><img src="/images/hardware/pca5.png" alt="PCA pins"></p>
<p>To connect them to the Nano, we first have to find out which of the Nano pins on its J41 header we should use. Luckily, the Jetson Nano J41 header has the same pinout as the Raspberry Pi, <a href="https://www.jetsonhacks.com/nvidia-jetson-nano-j41-header-pinout/">which you can see here</a>, or just use the TL;DR below:</p>
<ul>
<li>3V3: labeled red, position 1 and 17, connect PCA VCC pin to either of them</li>
<li>GND: labeled black, all over the place, connect PCA GND pin to any of them</li>
<li>I2C busses: labeled yellow, there are two of them:
<ul>
<li>Bus 0: position 27 (SDA) and position 28 (SCL)</li>
<li>Bus 1: position 3 (SDA) and position 5 (SCL)</li>
<li>Connect the PCA SDA and SCL pins to either bus</li>
<li>Note: the SDA/SCL pins come in pairs, you have to choose a pair/bus which you'll use</li>
</ul>
</li>
</ul>
<p><img src="/images/hardware/pinout.png" alt="Pinout"></p>
<p>I've connected mine to the first bus (Bus 0):</p>
<ul>
<li>PCA -&gt; Nano:
<ul>
<li>3V3 -&gt; 1</li>
<li>SDA -&gt; 3</li>
<li>SCL -&gt; 5</li>
<li>GND -&gt; 6</li>
</ul>
</li>
</ul>
<p><img src="/images/hardware/pinout2.png" alt="Pinout 2"></p>
<h1 id="the-hardware-part-is-done">The hardware part is done!</h1>


<footer class=" footline" >
	
</footer>


        
        </div> 
		
        
<script src="https://utteranc.es/client.js"
        repo="ivanorsolic/oriengineering"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/hardware/assembling-the-nano/" title="Assembling the Jetson Nano"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/software/" title="Software" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>
    </section>
    
		
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    <link href="/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
	
  </body>
</html>

